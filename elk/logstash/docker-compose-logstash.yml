version: '2.2'
services:
  logstash:
    build: .
    environment:
      LS_JAVA_OPTS: "-Xmx256m -Xms256m"
    networks:
      - elastic
    restart: always

  metricbeat:
    image: docker.elastic.co/beats/metricbeat:7.17.8
    environment:
      - ELASTICSEARCH_HOSTS=["http://es01:9200","http://es02:9200","http://es03:9200"]
      - KIBANA_HOST=http://kibana:5601
    restart: always
    networks:
      - elastic

networks:
  elastic:
    name: spring-chatting-server_default
    external: true